<!doctype html>
<html>
    <head>
        <title>{{ page.title }} | zpg Docs</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css"
            rel="stylesheet"
        />
        <style>
            body {
                font-family: "Inter", sans-serif;
                display: flex;
                flex-direction: row;
                line-height: 1.6;
                margin: 0;
                background-color: #0d1117; /* Default dark mode */
                color: #c9d1d9;
            }

            /* Top Bar */
            .top-bar {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 60px;
                background-color: #161b22; /* GitHub dark mode header */
                border-bottom: 1px solid #21262d;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 20px;
                box-sizing: border-box;
                z-index: 1000;
            }
            .top-bar h1 {
                margin: 0;
                font-size: 1.2em;
                font-weight: 600;
                color: #c9d1d9;
            }

            /* Sidebar */
            .sidebar {
                width: 20%;
                position: fixed;
                left: 0;
                top: 60px; /* Adjusted for top bar */
                height: calc(100vh - 60px);
                overflow-y: auto;
                padding: 24px;
                box-sizing: border-box;
                border-right: 1px solid #21262d;
                background-color: #0d1117;
                transition: transform 0.3s ease;
            }
            .sidebar h2 {
                margin-top: 0;
                font-size: 1.25em;
                font-weight: 600;
                color: #c9d1d9;
            }
            .sidebar ul {
                list-style: none;
                padding: 0;
            }
            .sidebar li a {
                text-decoration: none;
                color: #c9d1d9;
                display: block;
                padding: 8px 0;
                font-weight: 500;
            }
            .sidebar li a:hover {
                color: #58a6ff; /* GitHub’s blue accent */
            }

            /* Content */
            .content {
                width: 60%;
                margin-left: 20%;
                padding: 32px;
                box-sizing: border-box;
                margin-top: 60px; /* Adjusted for top bar */
                background-color: #0d1117;
            }

            /* TOC */
            .toc {
                width: 20%;
                position: fixed;
                right: 0;
                top: 80px; /* Adjusted for top bar */
                height: calc(100vh - 80px);
                overflow-y: auto;
                padding-left: 20px;
                background-color: #0d1117;
                border-left: 1px solid #21262d;
                transition: opacity 0.3s ease;
            }
            .toc h3 {
                margin-top: 0;
                font-size: 1.1em;
                font-weight: 600;
                color: #c9d1d9;
            }
            .toc ul {
                list-style: none;
                padding-left: 10px;
            }
            .toc li a {
                text-decoration: none;
                color: #8b949e;
                font-size: 0.9em;
                display: block;
                padding: 4px 0;
                font-weight: 400;
            }
            .toc li a:hover {
                color: #58a6ff;
            }

            /* Code Styling */
            pre {
                background-color: #0d1117;
                border: 1px solid #21262d;
                padding: 16px;
                border-radius: 6px;
                overflow-x: auto;
                font-family:
                    "SFMono-Regular", Consolas, "Courier New", monospace;
                font-size: 12px; /* GitHub’s code font size */
                line-height: 1.5;
                color: #c9d1d9;
            }
            code {
                background-color: #0d1117;
                border: 1px solid #21262d;
                padding: 0.2em 0.4em;
                border-radius: 6px;
                font-family:
                    "SFMono-Regular", Consolas, "Courier New", monospace;
                font-size: 12px; /* Adjusted to match GitHub */
                color: #c9d1d9;
            }
            pre code {
                background-color: transparent;
                border: none;
                padding: 0;
                font-size: 100%; /* Inherits from pre */
            }

            .card {
                background-color: #161b22;
                border: 1px solid #21262d;
                border-radius: 6px;
                padding: 16px;
                margin: 16px 0;
            }

            /* Menu Toggle */
            .menu-toggle {
                display: none;
                position: fixed;
                top: 18px;
                left: 16px;
                font-size: 1.5em;
                background: none;
                border: none;
                cursor: pointer;
                z-index: 1001; /* Above top bar */
                color: #c9d1d9;
            }
            .menu-toggle:hover {
                color: #58a6ff;
            }

            /* Media Queries for Mobile */
            @media (max-width: 768px) {
                body {
                    flex-direction: column;
                }
                .sidebar {
                    width: 100%;
                    height: auto;
                    transform: translateX(-100%);
                    z-index: 999;
                }
                .sidebar.active {
                    transform: translateX(0);
                }
                .content {
                    width: 100%;
                    margin-left: 0;
                    padding: 20px;
                }
                .toc {
                    display: none;
                    width: 100%;
                    position: static;
                    background-color: #0d1117;
                    border: none;
                    padding: 20px;
                    margin-top: 20px;
                }
                .toc.active {
                    display: block;
                }
                .menu-toggle {
                    display: block;
                }
            }
            @media (max-width: 480px) {
                .content {
                    padding: 16px;
                }
                .sidebar {
                    padding: 16px;
                }
                .toc {
                    padding: 16px;
                }
            }
        </style>
    </head>
    <body>
        <div class="top-bar">
            <h1></h1>
        </div>
        <button class="menu-toggle" aria-label="Toggle Menu">☰</button>
        <div class="sidebar">
            <h2></h2>
            <ul>
                <li><a href="{{ site.baseurl }}/">Home</a></li>
                <li>
                    <a href="{{ site.baseurl }}/configuration.html"
                        >Configuration</a
                    >
                </li>
                <li>
                    <a href="{{ site.baseurl }}/connections.html"
                        >Connections</a
                    >
                </li>
                <li><a href="{{ site.baseurl }}/querying.html">Querying</a></li>
                <li>
                    <a href="{{ site.baseurl }}/data_types.html">Data Types</a>
                </li>
                <li>
                    <a href="{{ site.baseurl }}/transactions.html"
                        >Transactions</a
                    >
                </li>
                <li><a href="{{ site.baseurl }}/tls.html">TLS/SSL</a></li>
                <li>
                    <a href="{{ site.baseurl }}/authentication.html"
                        >Authentication</a
                    >
                </li>
                <li>
                    <a href="{{ site.baseurl }}/rls.html">Row-Level Security</a>
                </li>
            </ul>
        </div>
        <div class="content" id="content">{{ content }}</div>
        <div class="toc">
            <h3>On This Page</h3>
            <ul id="toc-list"></ul>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-zig.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>

        <script>
            const headers = document.querySelectorAll(
                ".content h1, .content h2, .content h3",
            );
            const tocList = document.getElementById("toc-list");

            headers.forEach((header) => {
                let id = header.id;
                if (!id) {
                    id = header.textContent
                        .toLowerCase()
                        .replace(/[^\w\s-]/g, "")
                        .replace(/\s+/g, "-")
                        .replace(/-+/g, "-");
                    let uniqueId = id;
                    let counter = 1;
                    while (document.getElementById(uniqueId)) {
                        uniqueId = id + "-" + counter;
                        counter++;
                    }
                    header.id = uniqueId;
                }

                const li = document.createElement("li");
                const indent =
                    header.tagName === "H3"
                        ? 15
                        : header.tagName === "H2"
                          ? 5
                          : 0;
                li.style.marginLeft = `${indent}px`;
                li.innerHTML = `<a href="#${header.id}">${header.textContent}</a>`;
                tocList.appendChild(li);
            });

            const menuToggle = document.querySelector(".menu-toggle");
            const sidebar = document.querySelector(".sidebar");
            const toc = document.querySelector(".toc");

            menuToggle.addEventListener("click", () => {
                sidebar.classList.toggle("active");
                toc.classList.toggle("active");
            });

            const markdownContent = `{{ content }}`;
            document.getElementById("content").innerHTML =
                marked.parse(markdownContent);
        </script>
    </body>
</html>
