<!doctype html>
<html>
    <head>
        <title>{{ page.title }} | zpg Docs</title>
        <!-- Added site name to title -->
        <link
            href="https://fonts.googleapis.com/css2?family=Inter&display=swap"
            rel="stylesheet"
        />
        <style>
            body {
                font-family: "Inter", sans-serif;
                display: flex;
                line-height: 1.6; /* Improved readability */
            }
            .sidebar {
                width: 20%;
                position: fixed;
                left: 0;
                top: 0; /* Align to top */
                height: 100vh; /* Full height */
                overflow-y: auto; /* Scroll if needed */
                padding: 20px;
                box-sizing: border-box; /* Include padding in width */
                border-right: 1px solid #eee; /* Subtle separator */
            }
            .sidebar h2 {
                /* Add a title to the sidebar */
                margin-top: 0;
                font-size: 1.2em;
            }
            .sidebar ul {
                list-style: none;
                padding: 0;
            }
            .sidebar li a {
                text-decoration: none;
                color: #333;
                display: block; /* Make links block level */
                padding: 5px 0;
            }
            .sidebar li a:hover {
                color: #007bff;
            }
            .content {
                width: 60%; /* Reduced from 56% */
                margin-left: 20%; /* Match sidebar width */
                padding: 20px;
                box-sizing: border-box;
            }
            .toc {
                width: 20%;
                position: sticky;
                top: 20px;
                margin-left: 78%;
                height: calc(100vh - 40px);
                overflow-y: auto;
                padding-left: 15px;
            }
            .toc h3 {
                margin-top: 0;
                font-size: 1.1em;
            }
            .toc ul {
                list-style: none;
                padding-left: 10px; /* Indent TOC items */
            }
            .toc li a {
                text-decoration: none;
                color: #555;
                font-size: 0.9em;
                display: block;
                padding: 3px 0;
            }
            .toc li a:hover {
                color: #007bff;
            }

            /* Add some basic code styling */
            pre {
                background-color: #f8f8f8;
                border: 1px solid #ddd;
                padding: 10px;
                border-radius: 4px;
                overflow-x: auto; /* Handle long code lines */
            }
            code {
                font-family: Consolas, "Courier New", monospace;
                background-color: #f0f0f0; /* Slightly different background for inline code */
                padding: 2px 4px;
                border-radius: 3px;
            }
            pre code {
                /* Don't double-style code inside pre */
                background-color: transparent;
                padding: 0;
                border-radius: 0;
            }
        </style>
    </head>
    <body>
        <div class="sidebar">
            <h2>zpg Docs</h2>
            <!-- Added sidebar title -->
            <ul>
                <!-- Updated Links -->
                <li><a href="{{ site.baseurl }}/">Home</a></li>
                <li>
                    <a href="{{ site.baseurl }}/configuration.html"
                        >Configuration</a
                    >
                </li>
                <li>
                    <a href="{{ site.baseurl }}/connections.html"
                        >Connections</a
                    >
                </li>
                <li><a href="{{ site.baseurl }}/querying.html">Querying</a></li>
                <li>
                    <a href="{{ site.baseurl }}/data_types.html">Data Types</a>
                </li>
                <li>
                    <a href="{{ site.baseurl }}/transactions.html"
                        >Transactions</a
                    >
                </li>
                <li><a href="{{ site.baseurl }}/tls.html">TLS/SSL</a></li>
                <li>
                    <a href="{{ site.baseurl }}/authentication.html"
                        >Authentication</a
                    >
                </li>
                <li>
                    <a href="{{ site.baseurl }}/rls.html">Row-Level Security</a>
                </li>
                <!-- Add more links as needed -->
            </ul>
        </div>
        <div class="content">{{ content }}</div>
        <div class="toc">
            <h3>On This Page</h3>
            <ul id="toc-list"></ul>
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const headers = document.querySelectorAll(
                    ".content h1, .content h2, .content h3",
                );
                console.log("Found headers:", headers.length, headers); // Debug output
                const tocList = document.getElementById("toc-list");
                console.log("TOC list element:", tocList); // Verify the element exists
                headers.forEach((header, index) => {
                    let id = header.textContent
                        .toLowerCase()
                        .replace(/[^\w\s-]/g, "")
                        .replace(/\s+/g, "-")
                        .replace(/-+/g, "-");
                    let uniqueId = id;
                    let counter = 1;
                    while (document.getElementById(uniqueId)) {
                        uniqueId = id + "-" + counter;
                        counter++;
                    }
                    header.id = uniqueId;
                    const li = document.createElement("li");
                    const indent =
                        header.tagName === "H3"
                            ? 15
                            : header.tagName === "H2"
                              ? 5
                              : 0;
                    li.style.marginLeft = indent + "px";
                    li.innerHTML = `<a href="#${header.id}">${header.textContent}</a>`;
                    tocList.appendChild(li);
                });
            });
        </script>
    </body>
</html>
